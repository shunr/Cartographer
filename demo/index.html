<!DOCTYPE html>
<html>

<head>
    <script src="../dist/cartographer.min.js"></script>
</head>

<body>

    <img id="image" src="test.jpg">
    <map name="map" id="testmap">
        <area shape='rect' coords='470,274,645,491'>
        <area shape='circle' coords='989,309,852,229'>
        <area shape='poly' coords='189,137,200,71,248,162,388,189,232,207,168,291,192,189,78,158'>
    </map>
    <br/>
    <button onclick="rect()">Create rect</button>
    <button onclick="circle()">Create circle</button>
    <button onclick="poly()">Create poly</button>
    <button onclick="del()">Delete Shape</button>
    <button onclick="exportAsJSON()">Export json</button>
    <button onclick="exportAsMap()">Export map</button>
    <button onclick="restart()">Restart</button>
    <button onclick="stop()">Stop</button>
    <button onclick="importMap()">Load existing map</button>
    <script>
        var config = {
            imageId: "image",
            mapId: "",
        };
        // Initialize Cartographer with given configuration
        window.onload = function() {
            Cartographer.launch(config);
        };      

        //Add new rectangle, shift + click to drag
        function rect() {
            Cartographer.newShape("rect");
        }

        //Add new polygon map. Shift+click to add/remove vertices
        function poly() {  
            Cartographer.newShape("poly");
        }

        //Add new circle map, shift + click to drag
        function circle() {     
            Cartographer.newShape("circle");
        }

        //Delete highlighted shape
        function del() {
            Cartographer.deleteShape();
        }

        //Return JSON object of all created shapes
        function exportAsJSON() {
            console.log(Cartographer.exportMap("json"));
        }

        //Return array of HTML map objects of shapes
        function exportAsMap() {
            console.log(Cartographer.exportMap("map"));
        }

        
        //Import and edit existing map based on id
        function importMap() {
            Cartographer.importMap("testmap");
        }

        function stop() {
            Cartographer.stop();
        }

        function restart() {
            Cartographer.launch(config);
        }

    </script>
</body>

</html>